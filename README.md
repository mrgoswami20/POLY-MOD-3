# Polygon zkEVM
This is one of the best technique to prove to another party (the verifier) that a statement is true without revealing any specific information about the statement itself.One of the technologies they've been developing is the zkEVM.

The zkEVM is a layer 2 scaling solution that aims to improve the scalability and efficiency of decentralized applications (DApps) on the Ethereum network. It combines concepts from zero-knowledge proofs and the Ethereum Virtual Machine (EVM) to achieve this.

## Setup
After cloning the github, you will want to do the following to get the code running on your computer.
1. Inside the project directory, in the terminal type: npm i
2. After that create .env file and set PRIVATE_KEY of [Metamask](https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn)
3. In the terminal type: npx hardhat circom
   This will generate the **out** file with circuit intermediaries and geneate the **MultiplierVerifier.sol** contract
4. Then type: npx hardhat run scripts/deploy.ts --network mumbai

### Compile
`npx hardhat circom` 
This will generate the **out** file with circuit intermediaries and geneate the **MultiplierVerifier.sol** contract

### Prove and Deploy
`npx hardhat run scripts/deploy.ts --network <network_name>`
This script does 4 things  
1. Deploys the MultiplierVerifier.sol contract
2. Generates a proof from circuit intermediaries with `generateProof()`
3. Generates calldata with `generateCallData()`
4. Calls `verifyProof()` on the verifier contract with calldata

With two commands you can compile a ZKP, generate a proof, deploy a verifier, and verify the proof ðŸŽ‰

## Configuration
### Directory Structure
**circuits**
```
â”œâ”€â”€ multiplier
â”‚   â”œâ”€â”€ circuit.circom
â”‚   â”œâ”€â”€ input.json
â”‚   â””â”€â”€ out
â”‚       â”œâ”€â”€ circuit.wasm
â”‚       â”œâ”€â”€ multiplier.r1cs
â”‚       â”œâ”€â”€ multiplier.vkey
â”‚       â””â”€â”€ multiplier.zkey
â”œâ”€â”€ new-circuit
â””â”€â”€ powersOfTau28_hez_final_12.ptau
```
Each new circuit lives in it's own directory. At the top level of each circuit directory lives the circom circuit and input to the circuit.
The **out** directory will be autogenerated and store the compiled outputs, keys, and proofs. The Powers of Tau file comes from the Polygon Hermez ceremony, which saves time by not needing a new ceremony. 


**contracts**
```
contracts
â””â”€â”€ MultiplierVerifier.sol
```
Verifier contracts are autogenerated and prefixed by the circuit name, in this example **Multiplier**


**adding circuits**   
To add a new circuit, you can run the `newcircuit` hardhat task to autogenerate configuration and directories i.e  
```
npx hardhat newcircuit --name newcircuit
```
